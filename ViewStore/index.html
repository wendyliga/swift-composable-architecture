<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ComposableArchitecture - ViewStore</title>
    <link rel="stylesheet" type="text/css" href="/swift-composable-architecture/all.css" media="all" />
</head>
<body>
    <header>
        <a href="/swift-composable-architecture/">
            <strong>
                ComposableArchitecture
            </strong>
            <span>Documentation</span>
        </a>
        <sup>Beta</sup>
    </header>

    <!--
    <form class="search">
        <input type="search" placeholder="Search" />
    </form>
    -->

    <nav>
        <div class="wrapper">
            <h2>On This Page</h2>
            <ol><li><a href="#relationships">Relationships</a><ul><li><a href="#relationships">Conforms To</a></li></ul></li><li><a href="#initializers">Initializers</a><ul><li class="initializer"><a href="#viewstore.init(_:removeduplicates:)">init(_:​remove​Duplicates:​)</a></li></ul></li><li><a href="#properties">Properties</a><ul><li class="variable"><a href="#viewstore.publisher">publisher</a></li><li class="variable"><a href="#viewstore.state">state</a></li></ul></li><li><a href="#methods">Methods</a><ul><li class="function"><a href="#viewstore.send(_:)">send(_:​)</a></li><li class="function"><a href="#viewstore.binding(get:send:)">binding(get:​send:​)</a></li><li class="function"><a href="#viewstore.binding(get:send:)">binding(get:​send:​)</a></li><li class="function"><a href="#viewstore.binding(send:)">binding(send:​)</a></li><li class="function"><a href="#viewstore.binding(send:)">binding(send:​)</a></li></ul></li></ol>
        </div>
    </nav>

    <main>
        <article>
            <h1>
    <small>Class</small>
    <code class="name">View​Store</code>
</h1>

<html><body><pre class="highlight"><code><span class="attribute">@</span><span class="attribute">dynamicMemberLookup</span> <span class="keyword">public</span> <span class="attribute">final</span> <span class="keyword">class</span> <span class="type">ViewStore</span>&lt;<span class="variable">State</span>, <span class="variable">Action</span>&gt;: <span class="type">ObservableObject</span></code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>A <code>ViewStore</code> is an object that can observe state changes and send actions. They are most
commonly used in views, such as SwiftUI views, UIView or UIViewController, but they can be
used anywhere it makes sense to observe state and send actions.</p>

</div>
<div class="discussion">
    <p>In SwiftUI applications, a <code>ViewStore</code> is accessed most commonly using the <code>WithViewStore</code> view.
It can be initialized with a store and a closure that is handed a view store and must return a
view to be rendered:</p>

<html><body><pre class="highlight"><code><span class="keyword">var</span> <span class="variable">body</span>: <span class="keyword">some</span> <span class="type">View</span> {
  <span class="variable">WithViewStore</span>(<span class="keyword">self</span>.<span class="type">store</span>) { <span class="variable">viewStore</span> <span class="keyword">in</span>
    <span class="variable">VStack</span> {
      <span class="variable">Text</span>(<span class="string literal">"</span><span class="string literal">Current count: </span>\<span class="string literal">(</span><span class="variable">viewStore</span>.<span class="type">count</span><span class="string literal">)</span><span class="string literal"/><span class="string literal">"</span>)
      <span class="variable">Button</span>(<span class="string literal">"</span><span class="string literal">Increment</span><span class="string literal">"</span>) { <span class="variable">viewStore</span>.<span class="type">send</span>(.<span class="variable">incrementButtonTapped</span>) }
    }
  }
}
</code></pre></body></html>
<p>In UIKit applications a <code>ViewStore</code> can be created from a <code>Store</code> and then subscribed to for
state updates:</p>

<html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">store</span>: <a href="/swift-composable-architecture/Store"><span class="type">Store</span></a>&lt;<span class="type">State</span>, <span class="type">Action</span>&gt;
<span class="keyword">let</span> <span class="variable">viewStore</span>: <span class="type">ViewStore</span>&lt;<span class="type">State</span>, <span class="type">Action</span>&gt;

<span class="keyword">init</span>(<span class="variable">store</span>: <a href="/swift-composable-architecture/Store"><span class="type">Store</span></a>&lt;<span class="type">State</span>, <span class="type">Action</span>&gt;) {
  <span class="keyword">self</span>.<span class="type">store</span> = <span class="variable">store</span>
  <span class="keyword">self</span>.<span class="type">viewStore</span> = <span class="variable">ViewStore</span>(<span class="variable">store</span>)
}

<span class="keyword">func</span> <span class="function">viewDidLoad</span>() {
  <span class="keyword">super</span>.<span class="type">viewDidLoad</span>()

  <span class="keyword">self</span>.<span class="type">viewStore</span>.<span class="type">publisher</span>.<span class="type">count</span>
    .<span class="type">sink</span> { [<span class="variable">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span> <span class="keyword">self</span>?.<span class="type">countLabel</span>.<span class="type">text</span> = <span class="variable">$0</span> }
    .<span class="type">store</span>(<span class="variable">in</span>: &amp;<span class="keyword">self</span>.<span class="type">cancellables</span>)
}

<span class="attribute">@</span><span class="attribute">objc</span> <span class="keyword">func</span> <span class="function">incrementButtonTapped</span>() {
  <span class="keyword">self</span>.<span class="type">viewStore</span>.<span class="type">send</span>(.<span class="variable">incrementButtonTapped</span>)
}
</code></pre></body></html>
</div>
<section id="relationships">
    <h2 hidden>Relationships</h2>
        
        <h3>Conforms To</h3>
<dl>
    <dt class="unknown"><code>ObservableObject</code></dt>
</dl>
</section>
    <section id="initializers">
        <h2>Initializers</h2>

        <div role="article" class="initializer" id="viewstore.init(_:removeduplicates:)">
    <h3>
        <code>init(_:​remove​Duplicates:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">init</span>(<span class="keyword">_</span> <span class="variable">store</span>: <a href="/swift-composable-architecture/Store"><span class="type">Store</span></a>&lt;<span class="type">State</span>, <span class="type">Action</span>&gt;, <span class="variable">removeDuplicates</span> <span class="variable">isDuplicate</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">State</span>, <span class="type">State</span>) -&gt; <span class="type">Bool</span>)</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>Initializes a view store from a store.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>store</th>
    <td><code class="type">Store&lt;State, Action&gt;</code></td>
    <td><p>A store.</p>
</td>
</tr>
<tr>
    <th>is​Duplicate</th>
    <td><code class="type">@escaping (State, State) -&gt; Bool</code></td>
    <td><p>A function to determine when two <code>State</code> values are equal. When values are equal, repeat view computations are removed.</p>
</td>
</tr>
  </tbody>
</table>
</div>
    </section>
    <section id="properties">
        <h2>Properties</h2>

        <div role="article" class="variable" id="viewstore.publisher">
    <h3>
        <code>publisher</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">publisher</span>: <a href="/swift-composable-architecture/StorePublisher"><span class="type">StorePublisher</span></a>&lt;<span class="type">State</span>&gt;</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>A publisher of state.</p>

</div>
</div>
<div role="article" class="variable" id="viewstore.state">
    <h3>
        <code>state</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">var</span> <span class="variable">state</span>: <span class="type">State</span></code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>The current state.</p>

</div>
</div>
    </section>
    <section id="methods">
        <h2>Methods</h2>

        <div role="article" class="function" id="viewstore.send(_:)">
    <h3>
        <code>send(_:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">send</span>(<span class="keyword">_</span> <span class="variable">action</span>: <span class="type">Action</span>)</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>Sends an action to the store.</p>

</div>
<div class="discussion">
    <p><code>ViewStore</code> is not thread safe and you should only send actions to it from the main thread.
If you are wanting to send actions on background threads due to the fact that the reducer
is performing computationally expensive work, then a better way to handle this is to wrap
that work in an <code>Effect</code> that is performed on a background thread so that the result can
be fed back into the store.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>action</th>
    <td><code class="type">Action</code></td>
    <td><p>An action.</p>
</td>
</tr>
  </tbody>
</table>
</div>
<div role="article" class="function" id="viewstore.binding(get:send:)">
    <h3>
        <code>binding(get:​send:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">binding</span>&lt;<span class="variable">LocalState</span>&gt;(<span class="variable">get</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">State</span>) -&gt; <span class="type">LocalState</span>, <span class="variable">send</span> <span class="variable">localStateToViewAction</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">LocalState</span>) -&gt; <span class="type">Action</span>) -&gt; <span class="type">Binding</span>&lt;<span class="type">LocalState</span>&gt;</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>Derives a binding from the store that prevents direct writes to state and instead sends
actions to the store.</p>

</div>
<div class="discussion">
    <p>The method is useful for dealing with SwiftUI components that work with two-way <code>Binding</code>s
since the <code>Store</code> does not allow directly writing its state; it only allows reading state and
sending actions.</p>

<p>For example, a text field binding can be created like this:</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">State</span> { <span class="keyword">var</span> <span class="variable">name</span> = <span class="string literal">"</span><span class="string literal"/><span class="string literal">"</span> }
<span class="keyword">enum</span> <span class="type">Action</span> { <span class="keyword">case</span> <span class="variable">nameChanged</span>(<span class="type">String</span>) }

<span class="variable">TextField</span>(
  <span class="string literal">"</span><span class="string literal">Enter name</span><span class="string literal">"</span>,
  <span class="variable">text</span>: <span class="type">viewStore</span>.<span class="type">binding</span>(
    <span class="variable">get</span>: { <span class="variable">$0</span>.<span class="type">name</span> },
    <span class="variable">send</span>: { <span class="variable">Action</span>.<span class="type">nameChanged</span>(<span class="variable">$0</span>) }
  )
)
</code></pre></body></html>
</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>get</th>
    <td><code class="type">@escaping (State) -&gt; Local​State</code></td>
    <td><p>A function to get the state for the binding from the view store's full state.</p>
</td>
</tr>
<tr>
    <th>local​State​ToView​Action</th>
    <td><code class="type">@escaping (Local​State) -&gt; Action</code></td>
    <td><p>A function that transforms the binding's value into an action that can be sent to the store.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>A binding.</p>

</div>
<div role="article" class="function" id="viewstore.binding(get:send:)">
    <h3>
        <code>binding(get:​send:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">binding</span>&lt;<span class="variable">LocalState</span>&gt;(<span class="variable">get</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">State</span>) -&gt; <span class="type">LocalState</span>, <span class="variable">send</span> <span class="variable">action</span>: <span class="type">Action</span>) -&gt; <span class="type">Binding</span>&lt;<span class="type">LocalState</span>&gt;</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>Derives a binding from the store that prevents direct writes to state and instead sends
actions to the store.</p>

</div>
<div class="discussion">
    <p>The method is useful for dealing with SwiftUI components that work with two-way <code>Binding</code>s
since the <code>Store</code> does not allow directly writing its state; it only allows reading state and
sending actions.</p>

<p>For example, an alert binding can be dealt with like this:</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">State</span> { <span class="keyword">var</span> <span class="variable">alert</span>: <span class="type">String</span>? }
<span class="keyword">enum</span> <span class="type">Action</span> { <span class="keyword">case</span> <span class="variable">alertDismissed</span> }

.<span class="variable">alert</span>(
  <span class="variable">item</span>: <span class="keyword">self</span>.<span class="type">store</span>.<span class="type">binding</span>(
    <span class="variable">get</span>: { <span class="variable">$0</span>.<span class="type">alert</span> },
    <span class="variable">send</span>: .<span class="variable">alertDismissed</span>
  )
) { <span class="variable">alert</span> <span class="keyword">in</span> <span class="variable">Alert</span>(<span class="variable">title</span>: <span class="type">Text</span>(<span class="variable">alert</span>.<span class="type">message</span>)) }
</code></pre></body></html>
</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>get</th>
    <td><code class="type">@escaping (State) -&gt; Local​State</code></td>
    <td><p>A function to get the state for the binding from the view store's full state.</p>
</td>
</tr>
<tr>
    <th>action</th>
    <td><code class="type">Action</code></td>
    <td><p>The action to send when the binding is written to.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>A binding.</p>

</div>
<div role="article" class="function" id="viewstore.binding(send:)">
    <h3>
        <code>binding(send:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">binding</span>(<span class="variable">send</span> <span class="variable">localStateToViewAction</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">State</span>) -&gt; <span class="type">Action</span>) -&gt; <span class="type">Binding</span>&lt;<span class="type">State</span>&gt;</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>Derives a binding from the store that prevents direct writes to state and instead sends
actions to the store.</p>

</div>
<div class="discussion">
    <p>The method is useful for dealing with SwiftUI components that work with two-way <code>Binding</code>s
since the <code>Store</code> does not allow directly writing its state; it only allows reading state and
sending actions.</p>

<p>For example, a text field binding can be created like this:</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">State</span> { <span class="keyword">var</span> <span class="variable">name</span> = <span class="string literal">"</span><span class="string literal"/><span class="string literal">"</span> }
<span class="keyword">enum</span> <span class="type">Action</span> { <span class="keyword">case</span> <span class="variable">nameChanged</span>(<span class="type">String</span>) }

<span class="variable">TextField</span>(
  <span class="string literal">"</span><span class="string literal">Enter name</span><span class="string literal">"</span>,
  <span class="variable">text</span>: <span class="type">viewStore</span>.<span class="type">binding</span>(
    <span class="variable">send</span>: { <span class="variable">Action</span>.<span class="type">nameChanged</span>(<span class="variable">$0</span>) }
  )
)
</code></pre></body></html>
</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>local​State​ToView​Action</th>
    <td><code class="type">@escaping (State) -&gt; Action</code></td>
    <td><p>A function that transforms the binding's value into an action that can be sent to the store.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>A binding.</p>

</div>
<div role="article" class="function" id="viewstore.binding(send:)">
    <h3>
        <code>binding(send:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">binding</span>(<span class="variable">send</span> <span class="variable">action</span>: <span class="type">Action</span>) -&gt; <span class="type">Binding</span>&lt;<span class="type">State</span>&gt;</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>Derives a binding from the store that prevents direct writes to state and instead sends
actions to the store.</p>

</div>
<div class="discussion">
    <p>The method is useful for dealing with SwiftUI components that work with two-way <code>Binding</code>s
since the <code>Store</code> does not allow directly writing its state; it only allows reading state and
sending actions.</p>

<p>For example, an alert binding can be dealt with like this:</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">State</span> { <span class="keyword">var</span> <span class="variable">alert</span>: <span class="type">String</span>? }
<span class="keyword">enum</span> <span class="type">Action</span> { <span class="keyword">case</span> <span class="variable">alertDismissed</span> }

.<span class="variable">alert</span>(
  <span class="variable">item</span>: <span class="keyword">self</span>.<span class="type">store</span>.<span class="type">binding</span>(
    <span class="variable">send</span>: .<span class="variable">alertDismissed</span>
  )
) { <span class="variable">alert</span> <span class="keyword">in</span> <span class="variable">Alert</span>(<span class="variable">title</span>: <span class="type">Text</span>(<span class="variable">alert</span>.<span class="type">message</span>)) }
</code></pre></body></html>
</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>action</th>
    <td><code class="type">Action</code></td>
    <td><p>The action to send when the binding is written to.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>A binding.</p>

</div>
    </section>



        </article>
    </main>

    <footer>
        <p>
    Generated on <time datetime="2020-08-10T19:03:04+0000">August 10, 2020</time> using <a href="https://github.com/SwiftDocOrg/swift-doc">swift-doc</a> <span class="version">1.0.0-beta.4</span>.
</p>
    </footer>
</body>
</html>
